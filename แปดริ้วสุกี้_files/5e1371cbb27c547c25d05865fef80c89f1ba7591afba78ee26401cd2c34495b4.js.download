(self.webpackChunkappsheet_app=self.webpackChunkappsheet_app||[]).push([["components_shared_ErrorBoundary_tsx-src_common_app_editor_link_index_ts"],{648048:(e,t,n)=>{"use strict";var r=n(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorBoundary=void 0;var a=r(n(856690)),o=r(n(689728)),i=r(n(861655)),u=r(n(994993)),c=r(n(73808)),l=n(697211),s=r(n(667294)),d=r(n(593186)),p=n(44617);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}var v=function(e){(0,i.default)(n,e);var t=f(n);function n(e){var r;return(0,a.default)(this,n),(r=t.call(this,e)).renderDefaultOnError=function(e){var t=p.dynamicRollouts.includeByUserId("NewSupportLink")?"https://support.google.com/appsheet/gethelp":"/Support/Contact";return s.default.createElement("div",{style:{padding:"24px"}},s.default.createElement("b",{style:{fontSize:"16px"}},"An unexpected error occurred (id: ",r.state.frontendErrorTraceId,")."),s.default.createElement("br",null),s.default.createElement("br",null),"Please"," ",s.default.createElement("a",{className:"link",href:t,target:"_blank",rel:"noopener noreferrer"},"report to support")," ","with the error information so it can be fixed.",s.default.createElement("br",null),function(e,t,n){return s.default.createElement(l.Button,{color:"primary",variant:"contained","aria-label":"Copy error id",onClick:function(){navigator.clipboard.writeText("Error id: "+e+"\n\nStack: "+(null==t?void 0:t.stack)),null==n||n("Error information copied","info",null,5e3)},style:{marginTop:"12px"}},"Copy error information")}(r.state.frontendErrorTraceId,r.state.error,r.props.setMessagePopup),s.default.createElement("br",null)," ",s.default.createElement("br",null),window.DEBUG_MODE&&e.stack)},r.state={error:void 0,frontendErrorTraceId:void 0},r}return(0,o.default)(n,[{key:"componentDidCatch",value:function(e,t){var n=t.componentStack,r=Math.round(1e6*Math.random());d.default.ReportError({errorMessage:"ErrorBoundary.componentDidCatch",error:e,componentStack:n,frontendErrorTraceId:r}),this.setState({error:e,frontendErrorTraceId:r})}},{key:"render",value:function(){var e=this.state.error,t=this.props,n=t.children,r=t.renderOnError;return e?r?r(e):this.renderDefaultOnError(e):n}}]),n}(s.default.Component);t.ErrorBoundary=v},160647:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setPathToBroadcast=t.setHoveredElement=t.setEmulatorMode=t.setCurrentAppComponent=t.getHoveredElement=t.editingEmulatorReducer=t.INITIAL_EDITING_EMULATOR_STATE=void 0;var r=n(829829),a={emulatorMode:n(780146).DEFAULT_EMULATOR_MODE,hoveredElement:null,currentAppComponent:null,pathToBroadcast:null};t.INITIAL_EDITING_EMULATOR_STATE=a;var o=(0,r.createSlice)({name:"editingEmulator",initialState:a,reducers:{setEmulatorMode:function(e,t){e.emulatorMode=t.payload.mode},setHoveredElement:function(e,t){e.hoveredElement=t.payload},setCurrentAppComponent:function(e,t){e.currentAppComponent=t.payload.component},setPathToBroadcast:function(e,t){e.pathToBroadcast=t.payload}}});t.getHoveredElement=function(e){return e.editingEmulator.hoveredElement};var i=o.reducer;t.editingEmulatorReducer=i;var u=o.actions,c=u.setEmulatorMode,l=u.setHoveredElement,s=u.setCurrentAppComponent,d=u.setPathToBroadcast;t.setPathToBroadcast=d,t.setCurrentAppComponent=s,t.setHoveredElement=l,t.setEmulatorMode=c},780146:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_EMULATOR_MODE=void 0;t.DEFAULT_EMULATOR_MODE="preview"},851353:(e,t,n)=>{"use strict";var r=n(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.contentHovered=function(e){return f(this,void 0,void 0,a.default.mark((function t(){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h().postMessage({name:"emulator-interaction-event",event:"hover",data:e});case 2:case"end":return t.stop()}}),t)})))},t.disconnectBroadcastChannel=function(){return f(this,void 0,void 0,a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=4;break}return e.next=3,v.close();case 3:v=null;case 4:case"end":return e.stop()}}),e)})))},t.handleReflectChangeEvent=y,t.isDesktopEmulator=t.isAnyEmulator=void 0,t.listenForEditorEvents=function(e){E()&&(t=new URL(s.WindowWrapper.location.toString()),(n=new URLSearchParams(t.search)).delete("preview"),t.search=n.toString(),s.WindowWrapper.history.replaceState({},"",t.toString()));var t,n;h(e).addEventListener("message",(function(e){switch(e.name){case"reflect-change":y(e);break;case"sync-requested":window.StateReflector.RefreshAppData({initiatedBy:"Editor"});break;case"reload-emulator":!function(e){var t=e.data.version,n=location.href,r=new URL(n);r.searchParams.set("preview","2"),t&&(r.searchParams.set("version",t),n=r.toString());n===location.href?s.WindowWrapper.location.reload():s.WindowWrapper.location.href=n}(e);break;case"toggle-edit":!function(e){e.data.enable?p.default.attach():p.default.detach()}(e);break;case"highlight-item":p.default.highlightItem(e.data.id)}}))};var a=r(n(364687)),o=n(938437),i=r(n(819433)),u=n(692479),c=n(557310),l=n(759265),s=n(892148),d=n(276891),p=r(n(777194)),f=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function u(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},v=null;function h(e){var t="app-editor-".concat(e);return null!=v?v:v=new o.BroadcastChannel(t)}var m=function(){return new URLSearchParams(s.WindowWrapper.location.search).get("preview")===d.PreviewType.Authenticated};t.isAnyEmulator=m;var E=function(){return m()&&window===window.top};function y(e){var t=e.data,n=t.appTemplate,r=t.deepLink,a=t.dataByName;if(c.ReactRootUIConfig.isReactRoot()){if(window.StateReflector.UpdateAppTemplate(n,null,a),r){var o=(0,l.hashStringToUIState)(r);(0,i.default)().dispatch((0,u.newViewStack)({Identifier:{Type:"Control",Name:o.ControlName}}))}}else window.StateReflector.UpdateAppTemplate(n,r,a)}t.isDesktopEmulator=E},161822:(e,t,n)=>{"use strict";var r=n(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.broadcastChangeToApp=function(e,t,n){return u(this,void 0,void 0,a.default.mark((function r(){var o;return a.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=l(),r.next=3,o.postMessage({name:"reflect-change",data:{appTemplate:e,deepLink:t,dataByName:n}});case 3:case"end":return r.stop()}}),r)})))},t.broadcastEmulatorEditMode=function(e){return u(this,void 0,void 0,a.default.mark((function t(){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l().postMessage({name:"toggle-edit",data:{enable:"edit"===e}});case 2:case"end":return t.stop()}}),t)})))},t.broadcastHighlightItem=function(e){return u(this,void 0,void 0,a.default.mark((function t(){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l().postMessage({name:"highlight-item",data:{id:e}});case 2:case"end":return t.stop()}}),t)})))},t.broadcastReloadEmulator=function(e){return u(this,void 0,void 0,a.default.mark((function t(){var n;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l(),t.next=3,n.postMessage({name:"reload-emulator",data:{version:e}});case 3:case"end":return t.stop()}}),t)})))},t.broadcastSyncEmulator=function(){return u(this,void 0,void 0,a.default.mark((function e(){var t;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l(),e.next=3,t.postMessage({name:"sync-requested",data:null});case 3:case"end":return e.stop()}}),e)})))},t.disconnectBroadcastChannel=function(){return u(this,void 0,void 0,a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=4;break}return e.next=3,c.close();case 3:c=null;case 4:case"end":return e.stop()}}),e)})))},t.listenForAppEvents=function(e){return u(this,void 0,void 0,a.default.mark((function t(){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l().addEventListener("message",(function(t){if("emulator-interaction-event"===t.name)if("hover"===t.event)e.dispatch((0,i.setHoveredElement)(t.data))}));case 1:case"end":return t.stop()}}),t)})))};var a=r(n(364687)),o=n(938437),i=n(160647),u=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function u(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},c=null;function l(){var e="app-editor-".concat(window.APP_ID);return null!=c?c:c=new o.BroadcastChannel(e)}},917808:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreviewType",{enumerable:!0,get:function(){return o.PreviewType}}),Object.defineProperty(t,"broadcastChangeToApp",{enumerable:!0,get:function(){return r.broadcastChangeToApp}}),Object.defineProperty(t,"broadcastReloadEmulator",{enumerable:!0,get:function(){return r.broadcastReloadEmulator}}),Object.defineProperty(t,"broadcastSyncEmulator",{enumerable:!0,get:function(){return r.broadcastSyncEmulator}}),Object.defineProperty(t,"isAnyEmulator",{enumerable:!0,get:function(){return a.isAnyEmulator}}),Object.defineProperty(t,"isDesktopEmulator",{enumerable:!0,get:function(){return a.isDesktopEmulator}}),Object.defineProperty(t,"listenForEditorEvents",{enumerable:!0,get:function(){return a.listenForEditorEvents}});var r=n(161822),a=n(851353),o=n(276891)},777194:(e,t,n)=>{"use strict";var r=n(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(856690)),o=r(n(689728)),i=r(n(364687)),u=n(166089),c=n(44617),l=n(851353),s=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function u(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},d="\n  [data-vfe-active]::after {\n    background-color: rgba(41, 98, 255);\n    opacity: 0;\n    animation-duration: ".concat(1e3,"ms;\n    animation-name: highlight;\n    display: block;\n  }\n  @keyframes highlight {\n  from {\n    opacity: 0;\n  }\n  15% {\n    opacity: 0.2;\n  }\n  85% {\n    opacity: 0.2;\n  }\n  to {\n    opacity: 0;\n  }\n"),p=function(e){return new Promise((function(t){return setTimeout(t,e)}))},f=function(e,t){return s(void 0,void 0,void 0,i.default.mark((function n(){var r,a;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=Date.now();case 1:if(!(Date.now()-r<t)){n.next=9;break}return n.next=4,p(50);case 4:if(null,!(a=e())){n.next=7;break}return n.abrupt("return",a);case 7:n.next=1;break;case 9:return n.abrupt("return",null);case 10:case"end":return n.stop()}}),n)})))},v=function(e){return s(void 0,void 0,void 0,i.default.mark((function t(){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){setTimeout((function(){var n=Object.assign(Object.assign({},u.AppGlobals.AppState.CurrentUIState),{FormUIState:Object.assign(Object.assign({},u.AppGlobals.AppState.CurrentUIState.FormUIState),{vfeFocusColumn:null!=e?e:void 0,vfeTimestamp:Date.now()})});u.AppGlobals.AppState.ReplaceState(n),t(null)}))})));case 1:case"end":return t.stop()}}),t)})))},h=new(function(){function e(){var t,n=this;(0,a.default)(this,e),this.isAttached=!1,this.stylesheetEle=null,this.lastHoveredEle=null,this.onMouseOver=function(e){for(var t=e.target;null!=t&&!t.hasAttribute("data-vfe-column");)t=t.parentElement;if(t!==n.lastHoveredEle){var r=t?n.generateContext(t):null;(0,l.contentHovered)(r),n.lastHoveredEle=t}},this.onScroll=function(e){null!=n.lastHoveredEle&&((0,l.contentHovered)(null),n.lastHoveredEle=null)},this.highlightItem=(t=function(e){return s(n,void 0,void 0,i.default.mark((function t(){var n,r,a,o,c;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isAttached){t.next=2;break}return t.abrupt("return",!1);case 2:if(e.control?u.AppGlobals.AppState.CurrentUIState.ControlName!==e.control&&(r="#control=".concat(encodeURIComponent(e.control)),u.AppGlobals.StateChangeHandler.SwitchApp(r)):e.root&&e.table&&(u.AppGlobals.AppState.CurrentUIState.Root===e.root&&(null===(n=u.AppGlobals.AppState.CurrentUIState.FormUIState)||void 0===n?void 0:n.TableName)===e.table||(a="#table=".concat(encodeURIComponent(e.table))+"&page=".concat(encodeURIComponent(e.root)),u.AppGlobals.StateChangeHandler.SwitchApp(a))),c=null,c=(o=function(){return e.column?document.querySelector('[data-vfe-column="'.concat(e.column,'"]')):e.control?document.querySelector('[data-vfe-control="'.concat(e.control,'"]')):null})()){t.next=11;break}return t.next=8,v(e.column);case 8:return t.next=10,f(o,1e3);case 10:c=t.sent;case 11:if(c){t.next=13;break}return t.abrupt("return",!1);case 13:return void 0!==c.scrollIntoViewIfNeeded?c.scrollIntoViewIfNeeded():c.scrollIntoView(),c.setAttribute("data-vfe-active","1"),t.next=17,p(1e3);case 17:return c.removeAttribute("data-vfe-active"),t.abrupt("return",!0);case 19:case"end":return t.stop()}}),t,this)})))},function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return s(void 0,void 0,void 0,i.default.mark((function e(){var r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=HTMLElement.prototype.focus,e.prev=1,HTMLElement.prototype.focus=function(){},e.next=5,t.apply(void 0,n);case 5:return e.abrupt("return",e.sent);case 6:return e.prev=6,HTMLElement.prototype.focus=r,e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[1,,6,9]])})))})}return(0,o.default)(e,[{key:"generateContext",value:function(e){for(var t=e,n=null,r=null,a=null,o=null,i=null;t;)t.hasAttribute("data-vfe-column")&&(n=t,r=t.getAttribute("data-vfe-column")),t.hasAttribute("data-vfe-table")&&(a=t.getAttribute("data-vfe-table")),t.hasAttribute("data-vfe-control")&&(o=t.getAttribute("data-vfe-control")),t.hasAttribute("data-vfe-root")&&(i=t.getAttribute("data-vfe-root")),t=t.parentElement;if(null==n)return null;var u=$(n);return{id:{column:r,table:a,control:o,root:i},loc:Object.assign(Object.assign({},u.offset()),{width:u.width(),height:u.height()})}}},{key:"attachStylesheet",value:function(){if(!this.stylesheetEle){this.stylesheetEle=document.createElement("style");var e='\n  [data-vfe-interactive]::after {\n    content: "";\n    position: absolute;\n    right: 0;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    border: 1px dashed #42A5F5;\n    border-radius: 3px;\n    opacity: 0.0;\n    z-index: 1000;\n    transition: opacity 0.1s ease-out;\n    pointer-events: none;\n    display: none;\n  }\n';c.dynamicRollouts.includeByUserId("ShowVFEEmulatorOverlay")&&(e+="\n  [data-vfe-interactive]:hover::after {\n    display: block;\n    opacity: 1;\n  }\n"),e+=d,this.stylesheetEle.textContent=e,document.head.appendChild(this.stylesheetEle)}}},{key:"detachStylesheet",value:function(){this.stylesheetEle&&(document.head.removeChild(this.stylesheetEle),this.stylesheetEle=null)}},{key:"attach",value:function(){!this.isAttached&&c.dynamicRollouts.includeByUserId("EditingEmulator")&&(this.isAttached=!0,document.addEventListener("mouseover",this.onMouseOver,!0),document.addEventListener("scroll",this.onScroll,!0),this.attachStylesheet())}},{key:"detach",value:function(){this.isAttached&&(this.isAttached=!1,document.removeEventListener("mouseover",this.onMouseOver,!0),document.removeEventListener("scroll",this.onScroll,!0),this.detachStylesheet())}}]),e}());t.default=h},276891:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewType=void 0,t.PreviewType=n,function(e){e.Anonymous="1",e.Authenticated="2"}(n||(t.PreviewType=n={}))},200199:()=>{}}]);
//# sourceMappingURL=/cloud-sources/prod/31a7406c4f8fd71730dae4a7cbbd1f59fefb2509601a337eaac20b815b41894a.map/